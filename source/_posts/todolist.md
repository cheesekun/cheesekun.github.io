---
title: æ— æ¡†æ¶ç‰ˆTodoList
permalink: ch1015
date: 2017-3-21 10:10:10
categories:
- å‰ç«¯
tags:
- javascript
- å‰ç«¯
- todolist
- API
---
## å‰è¨€
èŠ±äº†ä¸¤å¤©ç»ˆäºæ’¸å®Œtodolistè¿™ä¸ªç©æ„äº†ï¼Œ
æ•ˆæœçœ‹:[TodoList](http://cheesekun.top/todolist/)
æ„Ÿè§‰å­¦ä¹ åˆ°å’Œæ„è¯†åˆ°ä¸€äº›ä¸œè¥¿
## å‰å‰è¨€
èº«ä¸ºä¸ªå‰ç«¯èŒæ–°ï¼Œå¾ˆå¤šæ—¶å€™éƒ½ä¸çŸ¥é“æ‹¿ä»€ä¹ˆç»ƒæ‰‹
è€Œå¾ˆå¤šæ—¶å€™ï¼Œå¤§å¤šæ•°äººéƒ½æ¨èåšä¸ªTodoList
ç½‘ä¸Šå¤§éƒ¨åˆ†äººåšçš„ä¾‹å­éƒ½æ˜¯ä½¿ç”¨äº†å„ç§æ¡†æ¶å„ç§åº“
ä½œä¸ºæ‰“åŸºç¡€ï¼Œè¿˜æ˜¯æ‰‹æ’¸ä¸ªåŸç”Ÿçš„TodoListæ¯”è¾ƒå¥½
(å…¶å®æ˜¯ä¸ä¼šç”¨æ¡†æ¶ï¼ŒğŸ˜±)
## çŸ¥è¯†ç‚¹
- `localStorage`å­˜å‚¨è·å–taskæ•°æ®
- `JSONP()`è·¨åŸŸè·å–apiæ•°æ®
- `Animate`CSS3å°åŠ¨ç”»
- å­—ä½“å›¾æ ‡çš„ä½¿ç”¨
- ~~contenteditable~~

## localStorageå­˜å‚¨è·å–task
è¿™ä¸ªä½¿ç”¨åˆ°ä¸Šæ¬¡æˆ‘å‘çš„é‚£ä¸ª`localStorage`æ¥æ“çºµæ•°æ®
ä¸äº†è§£çš„å…ˆè·³è½¬: [localStorage](http://cheesekun.top/2017/03/13/cheesekun.top/ch1010/)
> fench()å‡½æ•°å…ˆè·å–æµè§ˆå™¨ä¸Š"todolist"çš„æ•°æ®ï¼Œè‹¥æ²¡æœ‰ï¼Œå°±ç”¨todosä½œä¸ºæ•°ç»„å­˜å‚¨æ•°æ®å¹¶è½¬åŒ–ä¸ºjson
> save()å‡½æ•°å°†è·å–åˆ°æ•°æ®è½¬åŒ–ä¸ºjsonå­—ç¬¦ä¸²ï¼Œåœ¨å­˜å…¥åˆ°STORAGE_KEYä¸­

```javascript
var STORAGE_KEY = "todolist";
var todoStorage = {
  fetch: function() {
    var todos = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
    return todos;
  },
  save: function(todos) {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(todos));
  }
};
var todos = todoStorage.fetch();
```
## JSONPè·¨åŸŸè·å–apiæ•°æ®
è¿™ä¸ªæˆ‘ä¹‹å‰ä¹Ÿæ€»ç»“è¿‡ä¸€ç¯‡
å…·ä½“è§[getJSONPè·¨åŸŸ](http://cheesekun.top/2017/03/19/cheesekun.top/ch1014/)
è¿™é‡Œé¢ä½¿ç”¨åˆ°ä¸€ä¸ªå¤©æ°”apiå’Œä¸€ä¸ªåœ°å›¾api
## CSS3å°åŠ¨ç”»
å¾ˆå°‘ä½¿ç”¨css3åŠ¨ç”»ï¼Œä¸è¿‡ä¸€æ—¦ä½¿ç”¨æ•ˆæœæ‹”ç¾¤ï¼Œè‡³å°‘æœ‰ç‚¹å°åŠ¨ç”»ï¼Œæ•´ä½“é¡µé¢ä¹Ÿä¸ä¼šç‰¹åˆ«å•è°ƒ
ä¸è¿‡å…¼å®¹æ€§è¿˜æ˜¯éœ€è¦è§£å†³çš„
> å…ˆå»ºä¸€ä¸ªåŠ¨ç”»å¸§
> å†å°†å¸§ååŠ å…¥`animate`å‚æ•°ä¸­
`animation: name duration timing-function delay iteration-count direction play-state;`
> åˆ†åˆ«ä¸º å¸§åï¼ŒåŠ¨ç”»å®Œæˆæ—¶é—´ï¼Œè¿åŠ¨å‘¨æœŸæ›²çº¿ï¼Œå»¶è¿Ÿæ—¶é—´ï¼Œæ‰§è¡Œæ¬¡æ•°ï¼Œæ˜¯å¦å¾€è¿”æ’­æ”¾åŠ¨ç”»ï¼Œæš‚åœæˆ–è¿è¡Œ

```css
@keyframes swing {
  20% {
    -webkit-transform: rotate3d(0, 0, 1, 15deg);
    transform: rotate3d(0, 0, 1, 15deg);
  }
  40% {
    -webkit-transform: rotate3d(0, 0, 1, -10deg);
    transform: rotate3d(0, 0, 1, -10deg);
  }
  60% {
    -webkit-transform: rotate3d(0, 0, 1, 5deg);
    transform: rotate3d(0, 0, 1, 5deg);
  }
  80% {
    -webkit-transform: rotate3d(0, 0, 1, -5deg);
    transform: rotate3d(0, 0, 1, -5deg);
  }
  to {
    -webkit-transform: rotate3d(0, 0, 1, 0deg);
    transform: rotate3d(0, 0, 1, 0deg);
  }
}
animation: swing 5s infinite;
```
## å­—ä½“å›¾æ ‡
å’Œä½¿ç”¨å¤–éƒ¨å­—ä½“å·®ä¸å¤š
ä½¿ç”¨äº†:before, æ˜¾ç¤ºå¦‚ï¼š ğŸ˜ƒæŒ‰é’®
```css
@font-face {
  font-family: 'å­—ä½“å';
  src: url('å­—ä½“é“¾æ¥') format('å­—ä½“æ ¼å¼åç¼€');
  font-weight: normal;
  font-style: normal;
}
.btn:before {
  font-family: 'å­—ä½“å';
  content: "\e00f";   //å›¾æ ‡ç 
}
```
```html
<button class="btn">æŒ‰é’®</button>
```
## contenteditable
ä¸€ä¸ªç¥å¥‡çš„å±æ€§
`<p contenteditable>123<p>`
æ·»åŠ åˆ°æ–‡æœ¬æ ‡ç­¾ä¸Šå±…ç„¶å°±å¯ä»¥åœ¨é¡µé¢ä¸Šç¼–è¾‘ pæ ‡ç­¾äº†ï¼Œçªç„¶äº†è§£åˆ°ï¼Œä¸è¿‡æˆ‘åœ¨todolisté‡Œé¢å¹¶æ²¡æœ‰ä½¿ç”¨å®ƒ
## å°±åœ¨åˆšåˆš
å‘ç°æ•°ç»„å±…ç„¶æ˜¯jsonçš„ä¸€ç§ï¼Œä¸€ç›´ä»¥ä¸ºåƒå¯¹è±¡è¿™ç§é”®å€¼å¯¹çš„å­˜åœ¨æ‰æ˜¯json
æ²¡æƒ³åˆ°ç»´åŸºç™¾ç§‘è¯´æ•°ç»„ä¹Ÿæ˜¯
> å€¼çš„æœ‰åºåˆ—è¡¨ï¼ˆArrayï¼‰ï¼šä¸€ä¸ªæˆ–è€…å¤šä¸ªå€¼ç”¨,åˆ†åŒºåï¼Œä½¿ç”¨[ï¼Œ]æ‹¬èµ·æ¥å°±å½¢æˆäº†è¿™æ ·çš„åˆ—è¡¨ï¼Œå½¢å¦‚ï¼š
> [collection, collection]

å…·ä½“çœ‹ç»´åŸºç™¾ç§‘å¯¹JSONçš„å®šä¹‰L: [JSON](https://zh.wikipedia.org/wiki/JSON#WEB.E5.BC.80.E5.8F.91)
## æ„Ÿæƒ³
ä¸€å¼€å§‹åªæ˜¯æƒ³ä¸ä½¿ç”¨ä»»ä½•çš„æ¡†æ¶å’Œåº“æ¥åšä¸ªTodoList
ä¸è¿‡åœ¨åšçš„è¿‡ç¨‹ä¸­æƒ³æ·»åŠ ä¸ªå¤©æ°”é¢„æŠ¥ï¼Œæ·»åŠ ä¸ªéšæœºè¯­å¥ï¼Œæ·»åŠ ä¸ªcssåŠ¨ç”»
éƒ½å¯ä»¥æ‹“å±•å‡ºå¾ˆå¤šè‡ªå·±å¾ˆå°‘æˆ–è€…æœªæ›¾å»äº†è§£çš„çŸ¥è¯†
è€Œä¸”å­¦ä¹ èµ·æ¥æ›´æœ‰è¶£
ä¹‹å‰æœ‰èŠ±äº†ä¸€æ®µæ—¶é—´å»äº†è§£çš„vueï¼Œes6ç±»ä¼¼çš„æ–°çŸ¥è¯†ï¼Œä½†æ˜¯æ²¡ä½¿ç”¨åˆ°ï¼Œæ¸æ¸åœ°å°±é—å¿˜äº†
ååˆ†æ¶ˆè€—æ—¶é—´æˆæœ¬
å‘ç°å»å¯»æ‰¾åˆ¶ä½œä¸€ä¸ªä¸œè¥¿ï¼Œå†åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œæ–°çš„æ‹“å±•ï¼Œæ¯”èµ·åˆ»æ„å»å­¦ä¹ æ–°çŸ¥è¯†ï¼Œè·ç›Šæ›´å¤š
## ç»“è¯­
è™½ç„¶æ²¡æœ‰ä½¿ç”¨å°è£…ï¼Œé—­åŒ…ï¼ŒåŸå‹ä¹‹ç±»çš„çŸ¥è¯†ï¼Œä½†æ˜¯æ•ˆæœèƒ½å®ç°å·²ç»æ˜¯å¾ˆå¤§çš„å‹‰åŠ±äº†
è¯´åˆ°åº•å°±æ˜¯è‡ªå·±å¤ªæ°´äº†ï¼Œç»§ç»­åŠ æ²¹
